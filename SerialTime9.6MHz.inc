;1 Bit timings:
;1200 Baud - 835us
;2400 Baud - 420us
;4800 Baud - 210us
;9600 Baud - 105us

;Using r31, r30, r29

; Generated by delay loop calculator
; at http://www.bretmulvey.com/avrdelay.html
;9.6MHz

jmp end

.ifndef BAUDRATE
.equ BAUDRATE = 1200
.endif

.if BAUDRATE==1200
baud:
	ldi  r31, 11
    ldi  r30, 104
L2: dec  r30
    brne L2
    dec  r31
    brne L2
    nop

	ret
.endif

.if BAUDRATE==2400
baud:
	ldi  r31, 6
    ldi  r30, 59
L2: dec  r30
    brne L2
    dec  r31
    brne L2
    rjmp PC+1
	ret
.endif

.if BAUDRATE==4800
baud:
    ldi  r31, 3
    ldi  r30, 157
L2: dec  r30
    brne L2
    dec  r31
    brne L2
    rjmp PC+1
	ret
.endif

.if BAUDRATE==9600
baud:
	ldi  r31, 2
    ldi  r30, 78
L2: dec  r30
    brne L2
    dec  r31
    brne L2
    nop
	ret
.endif

end: nop
