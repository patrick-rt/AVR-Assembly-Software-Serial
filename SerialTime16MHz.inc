;1 Bit timings:
;1200 Baud - 835us
;2400 Baud - 420us
;4800 Baud - 210us
;9600 Baud - 105us

;Using r31, r30, r29

; Generated by delay loop calculator
; at http://www.bretmulvey.com/avrdelay.html
;16MHz

jmp end

.ifndef BAUDRATE
.equ BAUDRATE = 1200
.endif

.if BAUDRATE==1200
baud:
	ldi  r31, 18
    ldi  r30, 89
L2: dec  r30
    brne L2
    dec  r31
    brne L2
	ret
.endif

.if BAUDRATE==2400
baud:
	ldi  r31, 9
    ldi  r30, 185
L2: dec  r30
    brne L2
    dec  r31
    brne L2
    rjmp PC+1
	ret
.endif

.if BAUDRATE==4800
baud:
	ldi  r31, 5
    ldi  r30, 92
L2: dec  r30
    brne L2
    dec  r31
    brne L2
    nop
	ret
.endif

.if BAUDRATE==9600
baud:
	ldi  r31, 3
    ldi  r30, 45
L2: dec  r30
    brne L2
    dec  r31
    brne L2
    rjmp PC+1
	ret
.endif

end: nop
